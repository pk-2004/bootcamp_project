<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Report</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="student-report-container">
        <header class="student-header">
            <h1>Student Report</h1>
            <div class="student-info">
                <h2 id="student-name">Student 1</h2>
            </div>
        </header>
        
        <button class="back-button" onclick="goBack()">‚Üê Student List</button>

        <section class="student-performance">
            <div class="performance-card">
                <h3>Attendance</h3>
                <div class="progress-bar">
                    <div class="progress" style="width: 75%"></div>
                </div>
                <p>75% attendance</p>
            </div>

            <div class="performance-card">
                <h3>Homework Assignments</h3>
                <div class="progress-bar">
                    <div class="progress" style="width: 85%"></div>
                </div>
                <p>85% completed</p>
            </div>

            <div class="performance-card">
                <h3>Participation</h3>
                <div class="progress-bar">
                    <div class="progress" style="width: 60%"></div>
                </div>
                <p>60% participation rate</p>
            </div>
        </section>

        <section class="attendance-section">
            <h3>Attendance</h3>
            <div class="attendance-list">
                <label class="attendance-label">
                    <input type="checkbox" class="attendance-checkbox" id="day1"> 9/24
                </label>
                <label class="attendance-label">
                    <input type="checkbox" class="attendance-checkbox" id="day2"> 10/1
                </label>
                <label class="attendance-label">
                    <input type="checkbox" class="attendance-checkbox" id="day3"> 10/8
                </label>
                <label class="attendance-label">
                    <input type="checkbox" class="attendance-checkbox" id="day4"> 10/15
                </label>
                <label class="attendance-label">
                    <input type="checkbox" class="attendance-checkbox" id="day5"> 10/22
                </label>
                <label class="attendance-label">
                    <input type="checkbox" class="attendance-checkbox" id="day6"> 10/29
                </label>
                <label class="attendance-label">
                    <input type="checkbox" class="attendance-checkbox" id="day7"> 11/5
                </label>
                <label class="attendance-label">
                    <input type="checkbox" class="attendance-checkbox" id="day8"> 11/12
                </label>
                <label class="attendance-label">
                    <input type="checkbox" class="attendance-checkbox" id="day9"> 11/19
                </label>
                <label class="attendance-label">
                    <input type="checkbox" class="attendance-checkbox" id="day10"> 11/26
                </label>
            </div>
        </section>

        <section class="notes">
            <h3>Instructor Notes</h3>
            <textarea id="note-text" placeholder="Write notes about this student..."></textarea>
            <button id="save-note-button">Save Note</button>
            <div id="saved-notes-container">
                <!-- Saved notes will appear here -->
            </div>
        </section>

        <section id="summary-section">
            <button id="generate-summary">Generate Summary</button>
            <div id="summary-output"></div>
        </section>
    </div>

    <script>
        function goBack() {
            window.history.back();
        }
    
        const studentName = new URLSearchParams(window.location.search).get('student');
        if (studentName) {
            document.getElementById('student-name').textContent = studentName;
            document.title = `${studentName}'s Report`;
        }
    
        document.addEventListener("DOMContentLoaded", () => {
            const checkboxes = document.querySelectorAll(".attendance-checkbox");
            const progressElement = document.querySelector(".student-performance .performance-card:nth-child(1) .progress");
            const percentageText = document.querySelector(".student-performance .performance-card:nth-child(1) p");
    
            function updateAttendanceProgress() {
                const totalDays = checkboxes.length;
                const checkedDays = Array.from(checkboxes).filter(checkbox => checkbox.checked).length;
                const attendancePercentage = Math.round((checkedDays / totalDays) * 100);
    
                progressElement.style.width = `${attendancePercentage}%`;
                percentageText.textContent = `${attendancePercentage}% attendance`;
            }
    
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener("change", updateAttendanceProgress);
            });
    
            updateAttendanceProgress();
    
            const noteText = document.getElementById("note-text");
            const saveNoteButton = document.getElementById("save-note-button");
            const savedNotesContainer = document.getElementById("saved-notes-container");
    
            function saveNote() {
                const noteContent = noteText.value.trim();
                if (!noteContent) {
                    alert("Please write a note before saving.");
                    return;
                }
    
                const currentDate = new Date().toLocaleDateString("en-US", {
                    year: "numeric", month: "short", day: "numeric"
                });
    
                const noteCard = document.createElement("div");
                noteCard.className = "note-card";
                noteCard.innerHTML = `<p><strong>Date:</strong> ${currentDate}</p><p>${noteContent}</p>`;
                savedNotesContainer.prepend(noteCard);
    
                noteText.value = "";
            }
    
            saveNoteButton.addEventListener("click", saveNote);
    
            function generateSummary() {
                const totalDays = checkboxes.length;
                const presentDays = Array.from(checkboxes).filter(checkbox => checkbox.checked).length;
                const attendancePercentage = Math.round((presentDays / totalDays) * 100);

                const savedNotes = Array.from(savedNotesContainer.children)
                    .map(noteCard => noteCard.querySelector('p:nth-child(2)').textContent.trim())
                    .join(", ");

                const summary = `
                    Attendance: ${attendancePercentage}% present.
                    Comments: ${savedNotes || "No comments provided."}
                `;

                document.getElementById("summary-output").textContent = summary;
            }
    
            document.getElementById("generate-summary").addEventListener("click", generateSummary);
        });
    </script>
</body>
</html>